åœ¨ä½¿ç”¨ `gadget` ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Jupyter Notebook ä¸­æ³¨å†Œå®ƒçš„é­”æ³•å‘½ä»¤ï¼Œ  
è¿™æ ·å°±å¯ä»¥ç”¨ `%%gadget` ç›´æ¥åœ¨ Notebook å•å…ƒæ ¼é‡Œå†™å…¥ã€ä¿å­˜å’Œç¼–è¯‘ C/C++ ä»£ç ã€‚  
ä¸‹é¢çš„ä»£ç å®Œæˆäº†è¿™ä¸ªåˆå§‹åŒ–æ­¥éª¤ï¼š  

```python
from gadget import gadget, undo_magic_name
from IPython.core.getipython import get_ipython
ipython = get_ipython()
ipython.register_magic_function(gadget, 'cell')
```


## C è¯­è¨€æ‰‹åŠ¨èµ„æºç®¡ç†ç¤ºä¾‹

åœ¨ C è¯­è¨€ä¸­ï¼ŒåŠ¨æ€åˆ†é…çš„å†…å­˜éœ€è¦å¼€å‘è€…æ‰‹åŠ¨ç®¡ç†ã€‚  
è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ `malloc` åˆ†é…ä¸€å—å¯ä»¥å®¹çº³ 4 ä¸ª `int` çš„å†…å­˜ï¼Œç„¶åä¾æ¬¡èµ‹å€¼ã€éå†æ±‚å’Œï¼Œæœ€åä½¿ç”¨ `free` é‡Šæ”¾å†…å­˜ã€‚  
è¿™ç§æ–¹å¼å®¹æ˜“å‡ºç° **å†…å­˜æ³„æ¼**ï¼ˆå¿˜è®°é‡Šæ”¾ï¼‰æˆ– **é‡æŒ‡é’ˆ**ï¼ˆé‡Šæ”¾åç»§ç»­ä½¿ç”¨ï¼‰ç­‰é—®é¢˜ã€‚  

ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†è¿™ä¸ªè¿‡ç¨‹ï¼š  

```python
%%gadget -c ./oldc.c

#include<stdlib.h>
#include<stdio.h>

int main(){
    size_t nv = 4;
    int *v = (int *)malloc(nv * sizeof(int));
    v[0] = 4;
    v[1] = 3;
    v[2] = 2;
    v[3] = 1;

    int sum = 0;
    for(size_t i=0; i<nv; i++)
        sum += v[i];
    printf("%d\n", sum);
    free(v);
    return 0;
}
```

è¿è¡Œç¼–è¯‘å‘½ä»¤å¹¶æ‰§è¡Œç¨‹åºï¼Œå¾—åˆ°ç»“æœï¼š

```python
!gcc ./oldc.c -o ./oldc
!./oldc
```

è¾“å‡ºï¼š

```
10
```

> è®²è§£ï¼š`malloc` åˆ†é…çš„å†…å­˜åœ¨ç¨‹åºç»“æŸå‰å¿…é¡»æ‰‹åŠ¨è°ƒç”¨ `free` é‡Šæ”¾ï¼Œå¦åˆ™ä¼šé€ æˆå†…å­˜æ³„æ¼ã€‚
> å½“ä»£ç é€»è¾‘å¤æ‚ã€åˆ†æ”¯è¾ƒå¤šæ—¶ï¼Œå¾ˆå®¹æ˜“æ¼æ‰ `free`ï¼Œè¿™ä¹Ÿæ˜¯åæ¥ **RAII** æ€æƒ³è¢«å¼•å…¥ C++ çš„åŸå› ä¹‹ä¸€ã€‚


## C++98 ä½¿ç”¨ STL å®¹å™¨è‡ªåŠ¨ç®¡ç†å†…å­˜

ç›¸æ¯” C è¯­è¨€éœ€è¦æ‰‹åŠ¨ `malloc` / `free`ï¼ŒC++98 å¼•å…¥çš„ **æ ‡å‡†æ¨¡æ¿åº“ï¼ˆSTLï¼‰** æä¾›äº†å®¹å™¨ç±»ï¼Œä¾‹å¦‚ `std::vector`ï¼Œå¯ä»¥è‡ªåŠ¨ç®¡ç†å†…å­˜ã€‚  
ä½¿ç”¨ `std::vector` æ—¶ï¼Œå®¹å™¨åœ¨æ„é€ å‡½æ•°ä¸­åˆ†é…å†…å­˜ï¼Œåœ¨ææ„å‡½æ•°ä¸­è‡ªåŠ¨é‡Šæ”¾ï¼Œä¸éœ€è¦å¼€å‘è€…æ‰‹åŠ¨è°ƒç”¨ `free`ï¼Œå¤§å¤§é™ä½äº†å†…å­˜æ³„æ¼çš„é£é™©ã€‚  

ä¸‹é¢çš„ä»£ç ä½¿ç”¨ `std::vector<int>` å­˜å‚¨ 4 ä¸ªæ•´æ•°ï¼Œå¹¶é€šè¿‡ä¼ ç»Ÿçš„ `for` å¾ªç¯éå†æ±‚å’Œï¼š  

```python
%%gadget -c cpp_98_stl.cpp

#include<vector>
#include<iostream>

int main(){
    std::vector<int> v(4);
    v[0] = 4;
    v[1] = 3;
    v[2] = 2;
    v[3] = 1;

    int sum = 0;
    for(size_t i=0; i<v.size(); i++)
        sum += v[i];
    std::cout << sum << std::endl;
    return 0;
}
````

ä¸ºäº†æ„å»ºè¯¥ç¨‹åºï¼Œæˆ‘ä»¬ä½¿ç”¨ **CMake** æ¥ç”Ÿæˆ Makefile å¹¶ç¼–è¯‘ï¼š

```python
%%gadget -c CMakeLists.txt

# è®¾ç½® CMake æœ€ä½ç‰ˆæœ¬è¦æ±‚
cmake_minimum_required(VERSION 3.10)

# è®¾ç½®é¡¹ç›®åç§°
project(Cpp98StlProject)

# æŒ‡å®šä½¿ç”¨ C++98 æ ‡å‡†
set(CMAKE_CXX_STANDARD 98)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

# æ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶
add_executable(cpp_98_stl cpp_98_stl.cpp)
```

ç¼–è¯‘å¹¶è¿è¡Œï¼š

```python
!cmake -B build
!cmake --build build --target cpp_98_stl
!build/cpp_98_stl
```

è¾“å‡ºç»“æœï¼š

```
10
```

> è®²è§£ï¼š
>
> * `std::vector` åœ¨ä½œç”¨åŸŸç»“æŸæ—¶ä¼šè‡ªåŠ¨é‡Šæ”¾å†…å­˜ï¼Œé¿å…äº†æ‰‹åŠ¨é‡Šæ”¾çš„è´Ÿæ‹…ã€‚
> * C++98 è™½ç„¶å¼•å…¥äº†è‡ªåŠ¨å†…å­˜ç®¡ç†çš„å®¹å™¨ï¼Œä½†éå†ä¾ç„¶éœ€è¦ä¼ ç»Ÿçš„ `for` å¾ªç¯ï¼Œè¿™åœ¨ä¹‹åçš„ C++11 ä¸­å¾—åˆ°äº†æ”¹è¿›ã€‚

```


æ˜ç™½ï¼Œæˆ‘å¸®ä½ å†™çº¯å†…å®¹çš„ Markdownï¼Œç´§è´´ä»£ç å—ï¼Œç›´æ¥è¡¥å……è®²è§£éƒ¨åˆ†ï¼Œæ²¡æœ‰â€œè¿™ç¯‡åšå®¢â€ä¹‹ç±»çš„æè¿°ï¼š

````md
# ä½¿ç”¨ C++11 æ ‡å‡†å’ŒåŸºç¡€å¾ªç¯è®¡ç®—å‘é‡å…ƒç´ ä¹‹å’Œ

ä¸‹é¢çš„ä»£ç å®šä¹‰äº†ä¸€ä¸ªæ•´æ•°å‘é‡ `v`ï¼Œåˆå§‹åŒ–ä¸º `{4, 3, 2, 1}`ã€‚  
é€šè¿‡ä¼ ç»Ÿçš„ `for` å¾ªç¯éå†å‘é‡ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œå°†å…¶ç´¯åŠ åˆ°å˜é‡ `sum` ä¸­ã€‚æœ€ç»ˆè¾“å‡ºçš„ç»“æœæ˜¯æ‰€æœ‰å…ƒç´ çš„å’Œï¼Œå³ `10`ã€‚

```cpp
#include <vector>
#include <iostream>

int main(){
    std::vector<int> v = {4, 3, 2, 1};
    int sum = 0;
    for(size_t i=0; i<v.size(); i++)
        sum += v[i];
    std::cout << sum << std::endl;
    return 0;
}
````

ä½¿ç”¨ CMake è¿›è¡Œé¡¹ç›®æ„å»ºæ—¶ï¼ŒæŒ‡å®šäº† C++11 æ ‡å‡†ä»¥ç¡®ä¿ä»£ç å…¼å®¹ã€‚CMakeLists.txt å†…å®¹å¦‚ä¸‹ï¼š

```cmake
cmake_minimum_required(VERSION 3.10)
project(Cpp11LambdaProject)

set(CMAKE_CXX_STANDARD 11)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

add_executable(cpp_11_lambda cpp_11_lambda.cpp)
```

è¿è¡Œç¼–è¯‘å’Œæ‰§è¡Œå‘½ä»¤ï¼š

```bash
cmake -B build
cmake --build build --target cpp_11_lambda
./build/cpp_11_lambda
```

è¾“å‡ºç»“æœä¸ºï¼š

```
10
```


# ä½¿ç”¨ C++11 èŒƒå›´åŸºå¾ªç¯è®¡ç®—å‘é‡å…ƒç´ ä¹‹å’Œ

ä»¥ä¸‹ä»£ç æ¼”ç¤ºäº† C++11 å¼•å…¥çš„èŒƒå›´åŸº `for` å¾ªç¯ï¼ˆrange-based for loopï¼‰ç”¨æ³•ã€‚  
å®ƒç®€åŒ–äº†å¯¹å®¹å™¨å…ƒç´ çš„éå†ï¼Œä¸éœ€è¦ä½¿ç”¨ä¸‹æ ‡æˆ–è¿­ä»£å™¨ï¼Œä»£ç æ›´åŠ ç®€æ´æ˜“è¯»ã€‚

```cpp
#include <vector>
#include <iostream>

int main(){
    std::vector<int> v = {4, 3, 2, 1};
    int sum = 0;
    for (int vi : v)
        sum += vi;
    std::cout << sum << std::endl;
    return 0;
}
````

* å˜é‡ `vi` ä¾æ¬¡å–å‡ºå‘é‡ `v` ä¸­çš„æ¯ä¸ªå…ƒç´ å€¼ã€‚
* å¾ªç¯ä½“ä¸­å°†å…ƒç´ ç´¯åŠ åˆ° `sum`ã€‚
* è¾“å‡ºæœ€ç»ˆçš„ç´¯åŠ ç»“æœ `10`ã€‚

ä½¿ç”¨ CMake æ„å»ºé¡¹ç›®ï¼Œè®¾ç½® C++11 æ ‡å‡†ï¼š

```cmake
cmake_minimum_required(VERSION 3.10)
project(cpp11RangeBasedForLoopProject)

set(CMAKE_CXX_STANDARD 11)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

add_executable(cpp_11_range_based_for_loop cpp_11_range_based_for_loop.cpp)
```

ç¼–è¯‘æ‰§è¡Œå‘½ä»¤ï¼š

```bash
cmake -B build
cmake --build build --target cpp_11_range_based_for_loop
./build/cpp_11_range_based_for_loop
```

è¾“å‡ºç»“æœï¼š

```
10
```

èŒƒå›´åŸºå¾ªç¯è®©ä»£ç æ›´ç®€æ´ï¼Œé€‚åˆéå† STL å®¹å™¨å’Œæ•°ç»„ï¼Œæ˜¯ C++11 æ¨å¹¿ä½¿ç”¨çš„ç°ä»£å¾ªç¯æ–¹å¼ã€‚


````md
# ä½¿ç”¨ `std::for_each` å’Œå‡½æ•°è¿›è¡Œå‘é‡å…ƒç´ æ±‚å’Œ

ä»¥ä¸‹ä»£ç ä½¿ç”¨æ ‡å‡†åº“ç®—æ³• `std::for_each` æ¥éå†å‘é‡ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶é€šè¿‡è‡ªå®šä¹‰å‡½æ•° `func` ç´¯åŠ å…ƒç´ å€¼ã€‚

```cpp
#include <vector>
#include <iostream>
#include <algorithm>

int sum = 0;

void func(int vi){
    sum += vi;
}

int main(){
    std::vector<int> v = {4, 3, 2, 1};
    std::for_each(v.begin(), v.end(), func);
    std::cout << sum << std::endl;
    return 0;
}
````

* å®šä¹‰äº†å…¨å±€å˜é‡ `sum` ç”¨äºç´¯åŠ ã€‚
* `func` å‡½æ•°æ¥æ”¶å…ƒç´ å€¼ï¼Œå°†å…¶åŠ åˆ° `sum` ä¸Šã€‚
* ä½¿ç”¨ `std::for_each` éå†å‘é‡ï¼Œä¼ å…¥ `func` ä½œä¸ºæ“ä½œå‡½æ•°ã€‚
* æœ€ç»ˆè¾“å‡ºå…ƒç´ å’Œ `10`ã€‚

ä½¿ç”¨ CMake é…ç½®é¡¹ç›®ï¼ŒæŒ‡å®š C++11 æ ‡å‡†ï¼š

```cmake
cmake_minimum_required(VERSION 3.12)
project(cpp11ForEachProject)

set(CMAKE_CXX_STANDARD 11)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

add_executable(cpp_11_for_each cpp_11_for_each.cpp)
```

ç¼–è¯‘å’Œæ‰§è¡Œå‘½ä»¤ï¼š

```bash
cmake -B build
cmake --build build --target cpp_11_for_each
./build/cpp_11_for_each
```

è¾“å‡ºç»“æœï¼š

```
10
```

`std::for_each` æ˜¯ STL æä¾›çš„é€šç”¨ç®—æ³•ï¼Œå…è®¸å¯¹åŒºé—´å†…æ¯ä¸ªå…ƒç´ æ‰§è¡Œè‡ªå®šä¹‰æ“ä½œã€‚ç»“åˆå‡½æ•°æˆ– Lambdaï¼Œå¯å®ç°çµæ´»çš„æ•°æ®å¤„ç†ã€‚


````md
# ä½¿ç”¨ C++11 Lambda è¡¨è¾¾å¼ä¸ `std::for_each` è®¡ç®—å‘é‡å…ƒç´ å’Œ

è¯¥ç¤ºä¾‹ä½¿ç”¨ C++11 çš„ Lambda è¡¨è¾¾å¼ç®€åŒ–äº†å¯¹å®¹å™¨å…ƒç´ çš„éå†ä¸å¤„ç†ã€‚  
Lambda è¡¨è¾¾å¼é€šè¿‡æ•è·å¤–éƒ¨å˜é‡ï¼Œç›´æ¥åœ¨å‡½æ•°ä½“å†…ä¿®æ”¹ç´¯åŠ å˜é‡ `sum`ï¼Œä»£ç æ›´åŠ ç®€æ´æ˜äº†ã€‚

```cpp
#include <vector>
#include <iostream>
#include <algorithm>

int main(){
    std::vector<int> v = {4, 3, 2, 1};
    int sum = 0;
    std::for_each(v.begin(), v.end(), [&] (int vi){
        sum += vi;
    });
    std::cout << sum << std::endl;
    return 0;
}
````

* `[&]` è¡¨ç¤ºæ•è·å¤–éƒ¨æ‰€æœ‰å˜é‡çš„å¼•ç”¨ï¼Œè¿™é‡Œç”¨æ¥è®¿é—®å’Œä¿®æ”¹å¤–éƒ¨å˜é‡ `sum`ã€‚
* Lambda å‚æ•° `(int vi)` è¡¨ç¤ºæ¥æ”¶æ¯ä¸ªå…ƒç´ ã€‚
* Lambda å‡½æ•°ä½“å°†å…ƒç´ ç´¯åŠ åˆ° `sum`ã€‚
* æœ€ç»ˆè¾“å‡ºç´¯åŠ ç»“æœ `10`ã€‚

é¡¹ç›®ä½¿ç”¨ CMake è®¾ç½® C++11 æ ‡å‡†ï¼š

```cmake
cmake_minimum_required(VERSION 3.12)
project(cpp11LambdaExpressionProject)

set(CMAKE_CXX_STANDARD 11)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

add_executable(cpp_11_lambda_expression cpp_11_lambda_expression.cpp)
```

ç¼–è¯‘å’Œè¿è¡Œå‘½ä»¤ï¼š

```bash
cmake -B build
cmake --build build --target cpp_11_lambda_expression
./build/cpp_11_lambda_expression
```

è¾“å‡ºç»“æœï¼š

```
10
```

Lambda è¡¨è¾¾å¼ä½¿ä»£ç æ›´åŠ ç°ä»£å’Œçµæ´»ï¼Œé…åˆ STL ç®—æ³•å¯æå¤§æå‡ç¼–å†™æ•ˆç‡å’Œå¯è¯»æ€§ã€‚

# ä¼ ç»Ÿ C è¯­è¨€ä¸­çš„åŠ¨æ€æ•°ç»„æ±‚å’Œç¤ºä¾‹

ä¸‹é¢ä»£ç å±•ç¤ºäº†ç”¨ C è¯­è¨€åŠ¨æ€åˆ†é…æ•°ç»„å¹¶è®¡ç®—å…ƒç´ å’Œçš„ç»å…¸å†™æ³•ï¼š

```c
#include <stdlib.h>
#include <stdio.h>

int main(){
    size_t nv = 4;
    int *v = (int *)malloc(nv * sizeof(int));
    v[0] = 4;
    v[1] = 3;
    v[2] = 2;
    v[3] = 1;

    int sum = 0;
    for(size_t i=0; i<nv; i++)
        sum += v[i];
    printf("%d\n", sum);
    free(v);
    return 0;
}
````

* é€šè¿‡ `malloc` åŠ¨æ€åˆ†é…æ•´å‹æ•°ç»„ç©ºé—´ã€‚
* ä½¿ç”¨ `for` å¾ªç¯éå†æ•°ç»„å…ƒç´ ï¼Œç´¯åŠ æ±‚å’Œã€‚
* ç»“æœè¾“å‡ºä¸º `10`ã€‚
* ä½¿ç”¨å®Œæ¯•åè°ƒç”¨ `free` é‡Šæ”¾å†…å­˜ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚

ç›¸æ¯” C++ çš„ `std::vector`ï¼Œè¿™ç§å†™æ³•éœ€è¦æ‰‹åŠ¨ç®¡ç†å†…å­˜ï¼Œå®¹æ˜“å‡ºé”™ã€‚
C++ å®¹å™¨å’Œæ™ºèƒ½æŒ‡é’ˆæå¤§ç®€åŒ–äº†åŠ¨æ€å†…å­˜ç®¡ç†ï¼Œæ¨èåœ¨ç°ä»£ä»£ç ä¸­ä¼˜å…ˆä½¿ç”¨ã€‚

---

è¿è¡Œå‘½ä»¤åŠè¾“å‡ºï¼š

```bash
gcc ./oldc.c -o ./oldc
./oldc
```

è¾“å‡ºç»“æœï¼š

```
10
```


# ä½¿ç”¨ C++98 æ ‡å‡†å’Œ STL å®¹å™¨çš„å‘é‡æ±‚å’Œç¤ºä¾‹

ä¸‹é¢çš„ä»£ç å±•ç¤ºäº†åœ¨ C++98 æ ‡å‡†ä¸‹ï¼Œä½¿ç”¨ `std::vector` å®¹å™¨å’Œä¼ ç»Ÿ `for` å¾ªç¯æ¥è®¡ç®—å…ƒç´ å’Œçš„æ–¹æ³•ã€‚

```cpp
#include <vector>
#include <iostream>

int main(){
    std::vector<int> v(4);
    v[0] = 4;
    v[1] = 3;
    v[2] = 2;
    v[3] = 1;

    int sum = 0;
    for(size_t i = 0; i < v.size(); i++)
        sum += v[i];
    std::cout << sum << std::endl;
    return 0;
}
````

* ä½¿ç”¨ `std::vector<int> v(4);` åˆ›å»ºå›ºå®šå¤§å°ä¸º4çš„å‘é‡ã€‚
* é€šè¿‡ä¸‹æ ‡è®¿é—®å…ƒç´ å¹¶èµ‹å€¼ã€‚
* ä½¿ç”¨ `for` å¾ªç¯éå†å‘é‡å…ƒç´ è¿›è¡Œç´¯åŠ ã€‚
* è¾“å‡ºç»“æœä¸º `10`ã€‚

é¡¹ç›®çš„ CMake é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼ŒæŒ‡å®šä½¿ç”¨ C++98 æ ‡å‡†ï¼š

```cmake
cmake_minimum_required(VERSION 3.10)
project(Cpp98StlProject)

set(CMAKE_CXX_STANDARD 98)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

add_executable(cpp_98_stl cpp_98_stl.cpp)
```

ç¼–è¯‘å¹¶è¿è¡Œå‘½ä»¤ï¼š

```bash
cmake -B build
cmake --build build --target cpp_98_stl
./build/cpp_98_stl
```

è¾“å‡ºç»“æœï¼š

```
10
```

è¯¥ç¤ºä¾‹å±•ç¤ºäº† C++98 æ ‡å‡†ä¸‹ STL å®¹å™¨çš„åŸºæœ¬ç”¨æ³•å’Œä¼ ç»Ÿå¾ªç¯ç»“æ„ï¼Œé€‚åˆå¤ä¹ æ—©æœŸ C++ æ ‡å‡†çš„åŸºç¡€çŸ¥è¯†ã€‚

```
```


```python
%%gadget -c cpp_11_lambda.cpp

#include<vector>
#include<iostream>

int main(){
    std::vector<int> v = {4, 3, 2, 1};
    int sum = 0;
    for(size_t i=0; i<v.size(); i++)
        sum += v[i];
    std::cout << sum << std::endl;
    return 0;
}
```

    æ–‡ä»¶ cpp_11_lambda.cpp åˆ›å»ºæˆåŠŸï¼Œå†…å®¹å·²å†™å…¥ã€‚



```python
%%gadget -c CMakeLists.txt

# è®¾ç½® CMake æœ€ä½ç‰ˆæœ¬è¦æ±‚
cmake_minimum_required(VERSION 3.10)

# è®¾ç½®é¡¹ç›®åç§°
project(Cpp11LambdaProject)

# æŒ‡å®šä½¿ç”¨ C++11 æ ‡å‡†
set(CMAKE_CXX_STANDARD 11)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

# æ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶
add_executable(cpp_11_lambda cpp_11_lambda.cpp)
```

    æ–‡ä»¶ CMakeLists.txt åˆ›å»ºæˆåŠŸï¼Œå†…å®¹å·²å†™å…¥ã€‚



```python
!cmake -B build
!cmake --build build --target cpp_11_lambda
!build/cpp_11_lambda
```

    -- Configuring done
    -- Generating done
    -- Build files have been written to: /mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/build
    gmake[1]: Warning: File 'CMakeFiles/Makefile2' has modification time 1.6 s in the future
    gmake[2]: Warning: File 'CMakeFiles/Makefile2' has modification time 1.6 s in the future
    gmake[3]: Warning: File 'CMakeFiles/cpp_11_lambda.dir/progress.make' has modification time 1.5 s in the future
    [35m[1mConsolidate compiler generated dependencies of target cpp_11_lambda[0m
    gmake[3]: warning:  Clock skew detected.  Your build may be incomplete.
    gmake[3]: Warning: File 'CMakeFiles/cpp_11_lambda.dir/progress.make' has modification time 1.1 s in the future
    [ 50%] [32mBuilding CXX object CMakeFiles/cpp_11_lambda.dir/cpp_11_lambda.cpp.o[0m
    [100%] [32m[1mLinking CXX executable cpp_11_lambda[0m
    gmake[3]: warning:  Clock skew detected.  Your build may be incomplete.
    [100%] Built target cpp_11_lambda
    gmake[2]: warning:  Clock skew detected.  Your build may be incomplete.
    gmake[1]: warning:  Clock skew detected.  Your build may be incomplete.
    10



```python
%%gadget -c cpp_11_range_based_for_loop.cpp

#include<vector>
#include<iostream>

int main(){
    std::vector<int> v = {4, 3, 2, 1};
    int sum = 0;
    for (int vi:v)
        sum += vi;
    std::cout << sum << std::endl;
    return 0;
}
```

    æ–‡ä»¶ cpp_11_range_based_for_loop.cpp åˆ›å»ºæˆåŠŸï¼Œå†…å®¹å·²å†™å…¥ã€‚



```python
%%gadget -c CMakeLists.txt

# è®¾ç½® CMake æœ€ä½ç‰ˆæœ¬è¦æ±‚
cmake_minimum_required(VERSION 3.10)

# è®¾ç½®é¡¹ç›®åç§°
project(cpp11RangeBasedForLoopProject)

# æŒ‡å®šä½¿ç”¨ C++11 æ ‡å‡†
set(CMAKE_CXX_STANDARD 11)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

# æ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶
add_executable(cpp_11_range_based_for_loop cpp_11_range_based_for_loop.cpp)
```

    æ–‡ä»¶ CMakeLists.txt åˆ›å»ºæˆåŠŸï¼Œå†…å®¹å·²å†™å…¥ã€‚



```python
!cmake -B build
!cmake --build build --target cpp_11_range_based_for_loop
!build/cpp_11_range_based_for_loop
```

    -- Configuring done
    -- Generating done
    -- Build files have been written to: /mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/build
    gmake: Warning: File 'Makefile' has modification time 1.4 s in the future
    gmake[1]: Warning: File 'CMakeFiles/Makefile2' has modification time 1.4 s in the future
    gmake[2]: Warning: File 'CMakeFiles/Makefile2' has modification time 1.3 s in the future
    gmake[3]: Warning: File 'CMakeFiles/cpp_11_range_based_for_loop.dir/progress.make' has modification time 1.2 s in the future
    [35m[1mConsolidate compiler generated dependencies of target cpp_11_range_based_for_loop[0m
    gmake[3]: warning:  Clock skew detected.  Your build may be incomplete.
    gmake[3]: Warning: File 'CMakeFiles/cpp_11_range_based_for_loop.dir/progress.make' has modification time 0.75 s in the future
    [ 50%] [32mBuilding CXX object CMakeFiles/cpp_11_range_based_for_loop.dir/cpp_11_range_based_for_loop.cpp.o[0m
    [100%] [32m[1mLinking CXX executable cpp_11_range_based_for_loop[0m
    gmake[3]: warning:  Clock skew detected.  Your build may be incomplete.
    [100%] Built target cpp_11_range_based_for_loop
    gmake[2]: warning:  Clock skew detected.  Your build may be incomplete.
    gmake[1]: warning:  Clock skew detected.  Your build may be incomplete.
    gmake: warning:  Clock skew detected.  Your build may be incomplete.
    10



```python
%%gadget -c cpp_11_for_each.cpp

#include<vector>
#include<iostream>
#include <algorithm>

int sum = 0;

void func(int vi){
    sum += vi;
}

int main(){
    std::vector<int> v = {4, 3, 2, 1};
    std::for_each(v.begin(), v.end(), func);
    std::cout << sum << std::endl;
    return 0;
}
```

    æ–‡ä»¶ cpp_11_for_each.cpp åˆ›å»ºæˆåŠŸï¼Œå†…å®¹å·²å†™å…¥ã€‚



```python
%%gadget -c CMakeLists.txt

# è®¾ç½® CMake æœ€ä½ç‰ˆæœ¬è¦æ±‚
cmake_minimum_required(VERSION 3.12)

# è®¾ç½®é¡¹ç›®åç§°
project(cpp11ForEachProject)

# æŒ‡å®šä½¿ç”¨ C++11 æ ‡å‡†
set(CMAKE_CXX_STANDARD 11)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

# æ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶
add_executable(cpp_11_for_each cpp_11_for_each.cpp)
```

    æ–‡ä»¶ CMakeLists.txt åˆ›å»ºæˆåŠŸï¼Œå†…å®¹å·²å†™å…¥ã€‚



```python
!cmake -B build
!cmake --build build --target cpp_11_for_each
!build/cpp_11_for_each
```

    -- Configuring done
    -- Generating done
    -- Build files have been written to: /mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/build
    gmake: Warning: File 'Makefile' has modification time 1.1 s in the future
    gmake[1]: Warning: File 'CMakeFiles/Makefile2' has modification time 1.2 s in the future
    gmake[2]: Warning: File 'CMakeFiles/Makefile2' has modification time 1.1 s in the future
    gmake[3]: Warning: File 'CMakeFiles/cpp_11_for_each.dir/progress.make' has modification time 0.96 s in the future
    [35m[1mConsolidate compiler generated dependencies of target cpp_11_for_each[0m
    gmake[3]: warning:  Clock skew detected.  Your build may be incomplete.
    gmake[3]: Warning: File 'CMakeFiles/cpp_11_for_each.dir/progress.make' has modification time 0.51 s in the future
    [ 50%] [32mBuilding CXX object CMakeFiles/cpp_11_for_each.dir/cpp_11_for_each.cpp.o[0m
    [100%] [32m[1mLinking CXX executable cpp_11_for_each[0m
    gmake[3]: warning:  Clock skew detected.  Your build may be incomplete.
    [100%] Built target cpp_11_for_each
    gmake[2]: warning:  Clock skew detected.  Your build may be incomplete.
    gmake[1]: warning:  Clock skew detected.  Your build may be incomplete.
    gmake: warning:  Clock skew detected.  Your build may be incomplete.
    10



```python
%%gadget -c cpp_11_lambda_expression.cpp

#include<vector>
#include<iostream>
#include <algorithm>

int main(){
    std::vector<int> v = {4, 3, 2, 1};
    int sum = 0;
    std::for_each(v.begin(), v.end(), [&] (int vi){
        sum += vi;
    });
    std::cout << sum << std::endl;
    return 0;
}
```

    æ–‡ä»¶ cpp_11_lambda_expression.cpp åˆ›å»ºæˆåŠŸï¼Œå†…å®¹å·²å†™å…¥ã€‚



```python
%%gadget -c CMakeLists.txt

# è®¾ç½® CMake æœ€ä½ç‰ˆæœ¬è¦æ±‚
cmake_minimum_required(VERSION 3.12)

# è®¾ç½®é¡¹ç›®åç§°
project(cpp11LambdaExpressionProject)

# æŒ‡å®šä½¿ç”¨ C++11 æ ‡å‡†
set(CMAKE_CXX_STANDARD 11)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

# æ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶
add_executable(cpp_11_lambda_expression cpp_11_lambda_expression.cpp)
```

    æ–‡ä»¶ CMakeLists.txt åˆ›å»ºæˆåŠŸï¼Œå†…å®¹å·²å†™å…¥ã€‚



```python
!cmake -B build
!cmake --build build --target cpp_11_lambda_expression
!build/cpp_11_lambda_expression
```

    -- Configuring done
    -- Generating done
    -- Build files have been written to: /mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/build
    gmake: Warning: File 'Makefile' has modification time 0.97 s in the future
    gmake[1]: Warning: File 'CMakeFiles/Makefile2' has modification time 1 s in the future
    gmake[2]: Warning: File 'CMakeFiles/Makefile2' has modification time 0.91 s in the future
    gmake[3]: Warning: File 'CMakeFiles/cpp_11_lambda_expression.dir/progress.make' has modification time 0.84 s in the future
    [35m[1mConsolidate compiler generated dependencies of target cpp_11_lambda_expression[0m
    gmake[3]: warning:  Clock skew detected.  Your build may be incomplete.
    gmake[3]: Warning: File 'CMakeFiles/cpp_11_lambda_expression.dir/progress.make' has modification time 0.49 s in the future
    [ 50%] [32mBuilding CXX object CMakeFiles/cpp_11_lambda_expression.dir/cpp_11_lambda_expression.cpp.o[0m
    [100%] [32m[1mLinking CXX executable cpp_11_lambda_expression[0m
    gmake[3]: warning:  Clock skew detected.  Your build may be incomplete.
    [100%] Built target cpp_11_lambda_expression
    gmake[2]: warning:  Clock skew detected.  Your build may be incomplete.
    gmake[1]: warning:  Clock skew detected.  Your build may be incomplete.
    gmake: warning:  Clock skew detected.  Your build may be incomplete.
    10



```python
%%gadget -c cpp_14_lambda_auto.cpp

#include<vector>
#include<iostream>
#include <algorithm>

int main(){
    std::vector<int> v = {4, 3, 2, 1};
    int sum = 0;
    std::for_each(v.begin(), v.end(), [&] (auto vi){
        sum += vi;
    });
    std::cout << sum << std::endl;
    return 0;
}
```

    æ–‡ä»¶ cpp_14_lambda_auto.cpp åˆ›å»ºæˆåŠŸï¼Œå†…å®¹å·²å†™å…¥ã€‚



```python
%%gadget -c CMakeLists.txt

# è®¾ç½® CMake æœ€ä½ç‰ˆæœ¬è¦æ±‚
cmake_minimum_required(VERSION 3.12)

# è®¾ç½®é¡¹ç›®åç§°
project(cpp14LambdaAutoProject)

# æŒ‡å®šä½¿ç”¨ C++14 æ ‡å‡†
set(CMAKE_CXX_STANDARD 14)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

# æ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶
add_executable(cpp_14_lambda_auto cpp_14_lambda_auto.cpp)
```

    æ–‡ä»¶ CMakeLists.txt åˆ›å»ºæˆåŠŸï¼Œå†…å®¹å·²å†™å…¥ã€‚



```python
!cmake -B build
!cmake --build build --target cpp_14_lambda_auto
!build/cpp_14_lambda_auto
```

    -- Configuring done
    -- Generating done
    -- Build files have been written to: /mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/build
    gmake: Warning: File 'Makefile' has modification time 0.68 s in the future
    gmake[1]: Warning: File 'CMakeFiles/Makefile2' has modification time 0.72 s in the future
    gmake[2]: Warning: File 'CMakeFiles/Makefile2' has modification time 0.56 s in the future
    gmake[3]: Warning: File 'CMakeFiles/cpp_14_lambda_auto.dir/progress.make' has modification time 0.46 s in the future
    [35m[1mConsolidate compiler generated dependencies of target cpp_14_lambda_auto[0m
    gmake[3]: warning:  Clock skew detected.  Your build may be incomplete.
    gmake[3]: Warning: File 'CMakeFiles/cpp_14_lambda_auto.dir/compiler_depend.make' has modification time 0.88 s in the future
    [ 50%] [32mBuilding CXX object CMakeFiles/cpp_14_lambda_auto.dir/cpp_14_lambda_auto.cpp.o[0m
    [100%] [32m[1mLinking CXX executable cpp_14_lambda_auto[0m
    gmake[3]: warning:  Clock skew detected.  Your build may be incomplete.
    [100%] Built target cpp_14_lambda_auto
    gmake[2]: warning:  Clock skew detected.  Your build may be incomplete.
    gmake[1]: warning:  Clock skew detected.  Your build may be incomplete.
    gmake: warning:  Clock skew detected.  Your build may be incomplete.
    10



```python
!cmake -B build
!cmake --build build --target cpp_14_lambda_auto
!build/cpp_14_lambda_auto
```

    -- Configuring done
    -- Generating done
    -- Build files have been written to: /mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/build
    gmake: Warning: File 'Makefile' has modification time 0.48 s in the future
    gmake[1]: Warning: File 'CMakeFiles/Makefile2' has modification time 0.61 s in the future
    gmake[2]: Warning: File 'CMakeFiles/Makefile2' has modification time 0.53 s in the future
    gmake[3]: Warning: File 'CMakeFiles/cpp_14_lambda_auto.dir/progress.make' has modification time 0.44 s in the future
    [35m[1mConsolidate compiler generated dependencies of target cpp_14_lambda_auto[0m
    gmake[3]: warning:  Clock skew detected.  Your build may be incomplete.
    gmake[3]: Warning: File 'CMakeFiles/cpp_14_lambda_auto.dir/progress.make' has modification time 0.15 s in the future
    gmake[3]: warning:  Clock skew detected.  Your build may be incomplete.
    [100%] Built target cpp_14_lambda_auto
    gmake[2]: warning:  Clock skew detected.  Your build may be incomplete.
    gmake[1]: warning:  Clock skew detected.  Your build may be incomplete.
    gmake: warning:  Clock skew detected.  Your build may be incomplete.
    10



```python
%%gadget -c cpp_17_CTAD.cpp

#include<vector>
#include<iostream>
#include <algorithm>

int main(){
    std::vector<int> v = {4, 3, 2, 1};
    int sum = 0;
    std::for_each(v.begin(), v.end(), [&] (auto vi){
        sum += vi;
    });
    std::cout << sum << std::endl;
    return 0;
}
```

    æ–‡ä»¶ cpp_17_CTAD.cpp åˆ›å»ºæˆåŠŸï¼Œå†…å®¹å·²å†™å…¥ã€‚



```python
%%gadget -c CMakeLists.txt

# è®¾ç½® CMake æœ€ä½ç‰ˆæœ¬è¦æ±‚
cmake_minimum_required(VERSION 3.12)

# è®¾ç½®é¡¹ç›®åç§°
project(cpp17CTADProject)

# æŒ‡å®šä½¿ç”¨ C++17 æ ‡å‡†
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

# æ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶
add_executable(cpp_17_CTAD cpp_17_CTAD.cpp)
```

    æ–‡ä»¶ CMakeLists.txt åˆ›å»ºæˆåŠŸï¼Œå†…å®¹å·²å†™å…¥ã€‚



```python
!cmake -B build
!cmake --build build --target cpp_17_CTAD
!build/cpp_17_CTAD
```

    -- Configuring done
    -- Generating done
    -- Build files have been written to: /mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/build
    gmake: Warning: File 'Makefile' has modification time 0.35 s in the future
    gmake[1]: Warning: File 'CMakeFiles/Makefile2' has modification time 0.45 s in the future
    gmake[2]: Warning: File 'CMakeFiles/Makefile2' has modification time 0.34 s in the future
    gmake[3]: Warning: File 'CMakeFiles/cpp_17_CTAD.dir/progress.make' has modification time 0.23 s in the future
    [35m[1mConsolidate compiler generated dependencies of target cpp_17_CTAD[0m
    gmake[3]: warning:  Clock skew detected.  Your build may be incomplete.
    gmake[3]: Warning: File 'CMakeFiles/cpp_17_CTAD.dir/compiler_depend.make' has modification time 0.51 s in the future
    [ 50%] [32mBuilding CXX object CMakeFiles/cpp_17_CTAD.dir/cpp_17_CTAD.cpp.o[0m
    [100%] [32m[1mLinking CXX executable cpp_17_CTAD[0m
    gmake[3]: warning:  Clock skew detected.  Your build may be incomplete.
    [100%] Built target cpp_17_CTAD
    gmake[2]: warning:  Clock skew detected.  Your build may be incomplete.
    gmake[1]: warning:  Clock skew detected.  Your build may be incomplete.
    gmake: warning:  Clock skew detected.  Your build may be incomplete.
    10



```python
%%gadget -c cpp_17_numeric.cpp

#include<vector>
#include<iostream>
#include <numeric>

int main(){
    std::vector v = {4, 3, 2, 1};
    int sum = std::reduce(v.begin(), v.end());
    std::cout << sum << std::endl;
    return 0;
}
```

    æ–‡ä»¶ cpp_17_numeric.cpp åˆ›å»ºæˆåŠŸï¼Œå†…å®¹å·²å†™å…¥ã€‚



```python
%%gadget -c CMakeLists.txt

# è®¾ç½® CMake æœ€ä½ç‰ˆæœ¬è¦æ±‚
cmake_minimum_required(VERSION 3.12)

# è®¾ç½®é¡¹ç›®åç§°
project(cpp17CTADProject)

# æŒ‡å®šä½¿ç”¨ C++17 æ ‡å‡†
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

# æ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶
add_executable(cpp_17_numeric cpp_17_numeric.cpp)
```

    æ–‡ä»¶ CMakeLists.txt åˆ›å»ºæˆåŠŸï¼Œå†…å®¹å·²å†™å…¥ã€‚



```python
!cmake -B build
!cmake --build build --target cpp_17_numeric
!build/cpp_17_numeric
```

    -- Configuring done
    -- Generating done
    -- Build files have been written to: /mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/build
    gmake[1]: Warning: File 'CMakeFiles/Makefile2' has modification time 0.12 s in the future
    gmake[2]: Warning: File 'CMakeFiles/Makefile2' has modification time 0.0069 s in the future
    [35m[1mConsolidate compiler generated dependencies of target cpp_17_numeric[0m
    gmake[3]: Warning: File 'CMakeFiles/cpp_17_numeric.dir/compiler_depend.make' has modification time 0.33 s in the future
    [ 50%] [32mBuilding CXX object CMakeFiles/cpp_17_numeric.dir/cpp_17_numeric.cpp.o[0m
    [100%] [32m[1mLinking CXX executable cpp_17_numeric[0m
    gmake[3]: warning:  Clock skew detected.  Your build may be incomplete.
    [100%] Built target cpp_17_numeric
    gmake[2]: warning:  Clock skew detected.  Your build may be incomplete.
    gmake[1]: warning:  Clock skew detected.  Your build may be incomplete.
    10



```python
%%gadget -c cpp_20_ranges.cpp

#include<vector>
#include<iostream>
#include<numeric>
#include<ranges>
#include<cmath>

int main(){
    std::vector v = {4, 3, 2, 1, 0, -1, -2};
    for (auto &&vi : v
     | std::views::filter([](auto &&x) {return x >= 0; }) 
     | std::views::transform([] (auto &&x) { return sqrtf(x); })
     ){
        std::cout << vi << std::endl;
     }
    return 0;
}
```

    æ–‡ä»¶ cpp_20_ranges.cpp åˆ›å»ºæˆåŠŸï¼Œå†…å®¹å·²å†™å…¥ã€‚



```python
%%gadget -c CMakeLists.txt

# è®¾ç½® CMake æœ€ä½ç‰ˆæœ¬è¦æ±‚
cmake_minimum_required(VERSION 3.12)

# è®¾ç½®é¡¹ç›®åç§°
project(cpp20RangesProject)

# æŒ‡å®šä½¿ç”¨ C++20 æ ‡å‡†
set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

# æ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶
add_executable(cpp_20_ranges cpp_20_ranges.cpp)
```

    æ–‡ä»¶ CMakeLists.txt åˆ›å»ºæˆåŠŸï¼Œå†…å®¹å·²å†™å…¥ã€‚



```python
!cmake -B build
!cmake --build build --target cpp_20_ranges
!build/cpp_20_ranges
```

    -- Configuring done
    -- Generating done
    -- Build files have been written to: /mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/build
    [35m[1mConsolidate compiler generated dependencies of target cpp_20_ranges[0m
    [ 50%] [32mBuilding CXX object CMakeFiles/cpp_20_ranges.dir/cpp_20_ranges.cpp.o[0m
    [100%] [32m[1mLinking CXX executable cpp_20_ranges[0m
    [100%] Built target cpp_20_ranges
    2
    1.73205
    1.41421
    1
    0



```python
%%gadget -c cpp_20_module.cpp

import <vector>;
import <iostream>;
import <numeric>;
import <ranges>;
import <cmath>;

int main(){
    std::vector v = {4, 3, 2, 1, 0, -1, -2};
    for (auto &&vi : v
     | std::views::filter([](auto &&x) {return x >= 0; }) 
     | std::views::transform([] (auto &&x) { return sqrtf(x); })
     ){
        std::cout << vi << std::endl;
     }
    return 0;
}
```

    æ–‡ä»¶ cpp_20_module.cpp åˆ›å»ºæˆåŠŸï¼Œå†…å®¹å·²å†™å…¥ã€‚



```python
%%gadget -c CMakeLists.txt

# è®¾ç½® CMake æœ€ä½ç‰ˆæœ¬è¦æ±‚
cmake_minimum_required(VERSION 3.12)

# è®¾ç½®é¡¹ç›®åç§°
project(cpp20ModuleProject)

# æŒ‡å®šä½¿ç”¨ C++20 æ ‡å‡†
set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

# æ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶
add_executable(cpp_20_module cpp_20_module.cpp)
```

    æ–‡ä»¶ CMakeLists.txt åˆ›å»ºæˆåŠŸï¼Œå†…å®¹å·²å†™å…¥ã€‚



```python
!cmake -B build
!cmake --build build --target cpp_20_module
!build/cpp_20_module
```

    -- Configuring done
    -- Generating done
    -- Build files have been written to: /mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/build
    [35m[1mConsolidate compiler generated dependencies of target cpp_20_module[0m
    [ 50%] [32mBuilding CXX object CMakeFiles/cpp_20_module.dir/cpp_20_module.cpp.o[0m
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:2:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kvector[m[Kâ€™ was not declared in this scope
        2 | import <[01;31m[Kvector[m[K>;
          |         [01;31m[K^~~~~~[m[K
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:2:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kvector[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:2:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kvector[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:2:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kvector[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:2:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kvector[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:2:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kvector[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:2:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kvector[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:2:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kvector[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:2:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kvector[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:2:1:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kimport[m[Kâ€™ does not name a type
        2 | [01;31m[Kimport[m[K <vector>;
          | [01;31m[K^~~~~~[m[K
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:2:1:[m[K [01;36m[Knote: [m[KC++20 â€˜[01m[Kimport[m[Kâ€™ only available with â€˜[01m[K-fmodules-ts[m[Kâ€™, which is not yet enabled with â€˜[01m[K-std=c++20[m[Kâ€™
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:3:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kiostream[m[Kâ€™ was not declared in this scope
        3 | import <[01;31m[Kiostream[m[K>;
          |         [01;31m[K^~~~~~~~[m[K
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:3:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kiostream[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:3:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kiostream[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:3:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kiostream[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:3:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kiostream[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:3:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kiostream[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:3:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kiostream[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:3:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kiostream[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:3:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kiostream[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:3:1:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kimport[m[Kâ€™ does not name a type
        3 | [01;31m[Kimport[m[K <iostream>;
          | [01;31m[K^~~~~~[m[K
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:3:1:[m[K [01;36m[Knote: [m[KC++20 â€˜[01m[Kimport[m[Kâ€™ only available with â€˜[01m[K-fmodules-ts[m[Kâ€™, which is not yet enabled with â€˜[01m[K-std=c++20[m[Kâ€™
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:4:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Knumeric[m[Kâ€™ was not declared in this scope
        4 | import <[01;31m[Knumeric[m[K>;
          |         [01;31m[K^~~~~~~[m[K
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:4:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Knumeric[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:4:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Knumeric[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:4:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Knumeric[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:4:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Knumeric[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:4:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Knumeric[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:4:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Knumeric[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:4:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Knumeric[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:4:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Knumeric[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:4:1:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kimport[m[Kâ€™ does not name a type
        4 | [01;31m[Kimport[m[K <numeric>;
          | [01;31m[K^~~~~~[m[K
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:4:1:[m[K [01;36m[Knote: [m[KC++20 â€˜[01m[Kimport[m[Kâ€™ only available with â€˜[01m[K-fmodules-ts[m[Kâ€™, which is not yet enabled with â€˜[01m[K-std=c++20[m[Kâ€™
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:5:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kranges[m[Kâ€™ was not declared in this scope
        5 | import <[01;31m[Kranges[m[K>;
          |         [01;31m[K^~~~~~[m[K
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:5:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kranges[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:5:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kranges[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:5:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kranges[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:5:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kranges[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:5:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kranges[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:5:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kranges[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:5:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kranges[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:5:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kranges[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:5:1:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kimport[m[Kâ€™ does not name a type
        5 | [01;31m[Kimport[m[K <ranges>;
          | [01;31m[K^~~~~~[m[K
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:5:1:[m[K [01;36m[Knote: [m[KC++20 â€˜[01m[Kimport[m[Kâ€™ only available with â€˜[01m[K-fmodules-ts[m[Kâ€™, which is not yet enabled with â€˜[01m[K-std=c++20[m[Kâ€™
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:6:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kcmath[m[Kâ€™ was not declared in this scope
        6 | import <[01;31m[Kcmath[m[K>;
          |         [01;31m[K^~~~~[m[K
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:6:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kcmath[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:6:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kcmath[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:6:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kcmath[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:6:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kcmath[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:6:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kcmath[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:6:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kcmath[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:6:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kcmath[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:6:9:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kcmath[m[Kâ€™ was not declared in this scope
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:6:1:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kimport[m[Kâ€™ does not name a type
        6 | [01;31m[Kimport[m[K <cmath>;
          | [01;31m[K^~~~~~[m[K
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:6:1:[m[K [01;36m[Knote: [m[KC++20 â€˜[01m[Kimport[m[Kâ€™ only available with â€˜[01m[K-fmodules-ts[m[Kâ€™, which is not yet enabled with â€˜[01m[K-std=c++20[m[Kâ€™
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:[m[K In function â€˜[01m[Kint main()[m[Kâ€™:
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:9:10:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kvector[m[Kâ€™ is not a member of â€˜[01m[Kstd[m[Kâ€™
        9 |     std::[01;31m[Kvector[m[K v = {4, 3, 2, 1, 0, -1, -2};
          |          [01;31m[K^~~~~~[m[K
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:1:1:[m[K [01;36m[Knote: [m[Kâ€˜[01m[Kstd::vector[m[Kâ€™ is defined in header â€˜[01m[K<vector>[m[Kâ€™; did you forget to â€˜[01m[K#include <vector>[m[Kâ€™?
      +++ |+[32m[K#include <vector>[m[K
        1 | 
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:10:22:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kv[m[Kâ€™ was not declared in this scope; did you mean â€˜[01m[Kvi[m[Kâ€™?
       10 |     for (auto &&vi : [01;31m[Kv[m[K
          |                      [01;31m[K^[m[K
          |                      [32m[Kvi[m[K
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:11:13:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kstd::views[m[Kâ€™ has not been declared
       11 |      | std::[01;31m[Kviews[m[K::filter([](auto &&x) {return x >= 0; })
          |             [01;31m[K^~~~~[m[K
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:12:13:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kstd::views[m[Kâ€™ has not been declared
       12 |      | std::[01;31m[Kviews[m[K::transform([] (auto &&x) { return sqrtf(x); })
          |             [01;31m[K^~~~~[m[K
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:14:14:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kcout[m[Kâ€™ is not a member of â€˜[01m[Kstd[m[Kâ€™
       14 |         std::[01;31m[Kcout[m[K << vi << std::endl;
          |              [01;31m[K^~~~[m[K
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:1:1:[m[K [01;36m[Knote: [m[Kâ€˜[01m[Kstd::cout[m[Kâ€™ is defined in header â€˜[01m[K<iostream>[m[Kâ€™; did you forget to â€˜[01m[K#include <iostream>[m[Kâ€™?
      +++ |+[32m[K#include <iostream>[m[K
        1 | 
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:14:33:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kendl[m[Kâ€™ is not a member of â€˜[01m[Kstd[m[Kâ€™
       14 |         std::cout << vi << std::[01;31m[Kendl[m[K;
          |                                 [01;31m[K^~~~[m[K
    [01m[K/mnt/c/Users/Jeff/Desktop/cpp_course_from_scratch/cpp_20_module.cpp:1:1:[m[K [01;36m[Knote: [m[Kâ€˜[01m[Kstd::endl[m[Kâ€™ is defined in header â€˜[01m[K<ostream>[m[Kâ€™; did you forget to â€˜[01m[K#include <ostream>[m[Kâ€™?
      +++ |+[32m[K#include <ostream>[m[K
        1 | 
    gmake[3]: *** [CMakeFiles/cpp_20_module.dir/build.make:76: CMakeFiles/cpp_20_module.dir/cpp_20_module.cpp.o] Error 1
    gmake[2]: *** [CMakeFiles/Makefile2:83: CMakeFiles/cpp_20_module.dir/all] Error 2
    gmake[1]: *** [CMakeFiles/Makefile2:90: CMakeFiles/cpp_20_module.dir/rule] Error 2
    gmake: *** [Makefile:124: cpp_20_module] Error 2
    /bin/bash: line 1: build/cpp_20_module: No such file or directory


### cmake is not support c++ 20 module currently


```python
%%gadget -c cpp_20_module.cpp

import std.vector;
import std.iostream;
import std.numeric;
import std.ranges;
import std.cmath;

int main(){
    std::vector v = {4, 3, 2, 1, 0, -1, -2};
    for (auto &&vi : v
     | std::views::filter([](auto &&x) {return x >= 0; }) 
     | std::views::transform([] (auto &&x) { return sqrtf(x); })
     ){
        std::cout << vi << std::endl;
     }
    return 0;
}
```

    æ–‡ä»¶ cpp_20_module.cpp åˆ›å»ºæˆåŠŸï¼Œå†…å®¹å·²å†™å…¥ã€‚



```python
!g++-10 -std=c++20 -fmodules-ts ./cpp_20_module.cpp -o ./cpp_20_module
```

    [01m[Kg++-10:[m[K [01;31m[Kerror: [m[Kunrecognized command-line option â€˜[01m[K-fmodules-ts[m[Kâ€™; did you mean â€˜[01m[K-fmodules[m[Kâ€™?



```python
%%gadget -c cpp_20_module.cpp

import <vector>;
import <iostream>;
import <numeric>;
import <ranges>;
import <cmath>;

int main(){
    std::vector v = {4, 3, 2, 1, 0, -1, -2};
    for (auto &&vi : v
     | std::views::filter([](auto &&x) {return x >= 0; }) 
     | std::views::transform([] (auto &&x) { return sqrtf(x); })
     ){
        std::cout << vi << std::endl;
     }
    return 0;
}
```

    æ–‡ä»¶ cpp_20_module.cpp åˆ›å»ºæˆåŠŸï¼Œå†…å®¹å·²å†™å…¥ã€‚



```python
!clang++ -std=c++20 -fmodules -fcxx-modules ./cpp_20_module.cpp -o ./cpp_20_module
```

    [1m./cpp_20_module.cpp:2:8: [0m[0;1;31merror: [0m[1mheader file <vector> (aka '/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/vector') cannot be imported because it is not known to be a header unit[0m
    import <vector>;
    [0;1;32m       ^
    [0m[1m./cpp_20_module.cpp:3:8: [0m[0;1;31merror: [0m[1mheader file <iostream> (aka '/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/iostream') cannot be imported because it is not known to be a header unit[0m
    import <iostream>;
    [0;1;32m       ^
    [0m[1m./cpp_20_module.cpp:4:8: [0m[0;1;31merror: [0m[1mheader file <numeric> (aka '/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/numeric') cannot be imported because it is not known to be a header unit[0m
    import <numeric>;
    [0;1;32m       ^
    [0m[1m./cpp_20_module.cpp:5:8: [0m[0;1;31merror: [0m[1mheader file <ranges> (aka '/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/ranges') cannot be imported because it is not known to be a header unit[0m
    import <ranges>;
    [0;1;32m       ^
    [0m[1m./cpp_20_module.cpp:6:8: [0m[0;1;31merror: [0m[1mheader file <cmath> (aka '/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/cmath') cannot be imported because it is not known to be a header unit[0m
    import <cmath>;
    [0;1;32m       ^
    [0m[1m./cpp_20_module.cpp:9:5: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'std'[0m
        std::vector v = {4, 3, 2, 1, 0, -1, -2};
    [0;1;32m    ^
    [0m[1m./cpp_20_module.cpp:11:8: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'std'[0m
         | std::views::filter([](auto &&x) {return x >= 0; }) 
    [0;1;32m       ^
    [0m[1m./cpp_20_module.cpp:12:8: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'std'[0m
         | std::views::transform([] (auto &&x) { return sqrtf(x); })
    [0;1;32m       ^
    [0m[1m./cpp_20_module.cpp:14:9: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'std'[0m
            std::cout << vi << std::endl;
    [0;1;32m        ^
    [0m[1m./cpp_20_module.cpp:14:28: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'std'[0m
            std::cout << vi << std::endl;
    [0;1;32m                           ^
    [0m10 errors generated.



```python
%%gadget -c cpp_20_module_auto.cpp

import <vector>;
import <iostream>;
import <numeric>;
import <ranges>;
import <cmath>;

void myfunc(auto &&v){
    for (auto &&vi : v
     | std::views::filter([](auto &&x) {return x >= 0; }) 
     | std::views::transform([] (auto &&x) { return sqrtf(x); })
     ){
        std::cout << vi << std::endl;
     }
}

int main(){
    std::vector v = {4, 3, 2, 1, 0, -1, -2};
    myfunc(v);
    return 0;
}
```

    æ–‡ä»¶ cpp_20_module_auto.cpp åˆ›å»ºæˆåŠŸï¼Œå†…å®¹å·²å†™å…¥ã€‚



```python
%%gadget -c cpp_20_coroutine_generator.cpp

import <vector>;
import <iostream>;
import <numeric>;
import <ranges>;
import <cmath>;
import <generator>;

std::generator<int> myfunc(auto &&v){
    for (auto &&vi : v
     | std::views::filter([](auto &&x) {return x >= 0; }) 
     | std::views::transform([] (auto &&x) { return sqrtf(x); })
     ){
        co_yield vi;
     }
}

int main(){
    std::vector v = {4, 3, 2, 1, 0, -1, -2};
    for (auto &&vi : myfunc(v))
        std::cout << vi << std::endl;
    return 0;
}
```

    æ–‡ä»¶ cpp_20_coroutine_generator.cpp åˆ›å»ºæˆåŠŸï¼Œå†…å®¹å·²å†™å…¥ã€‚



```python
%%gadget -c cpp_20_coroutine_generator_format.cpp

import <vector>;
import <iostream>;
import <numeric>;
import <ranges>;
import <cmath>;
import <generator>;

std::generator<int> myfunc(auto &&v){
    for (auto &&vi : v
     | std::views::filter([](auto &&x) {return x >= 0; }) 
     | std::views::transform([] (auto &&x) { return sqrtf(x); })
     ){
        co_yield vi;
     }
}

int main(){
    std::vector v = {4, 3, 2, 1, 0, -1, -2};
    for (auto &&vi : myfunc(v))
        std::format_to(std::cout, "num is: {}\n", vi);
    return 0;
}
```

    æ–‡ä»¶ cpp_20_coroutine_generator_format.cpp åˆ›å»ºæˆåŠŸï¼Œå†…å®¹å·²å†™å…¥ã€‚

